let input=document.querySelector("#input"),output=document.querySelector("#output"),indentSize=document.querySelector("#indent"),loadFile=document.querySelector("#loadfile"),loadurl=document.querySelector("#loadfile"),obLevel=document.querySelector("#level");const config={styleActiveLine:!0,lineNumbers:!0,tabSize:4,mode:"javascript"},editorInput=CodeMirror.fromTextArea(document.getElementById("input"),config),editorOutput=CodeMirror.fromTextArea(document.getElementById("output"),config);let beautifyOptions={preserve_newlines:!0,indent_size:2},filename="script";function getBeautifyOptions(){return beautifyOptions.indent_size=parseInt(indentSize.value),beautifyOptions}function beautify(e,t){return js_beautify(e,t)}async function minify(e){try{return(await Terser.minify(e)).code}catch(e){alert("Couldn't minify")}}function obfuscate(e,t){try{return JavaScriptObfuscator.obfuscate(e,{optionsPreset:t}).getObfuscatedCode()}catch(e){alert(e)}}function onSaveClicked(){let e="data:x-application/text,"+escape(editorOutput.getValue());dl.href=e,dl.download=filename,dl.click()}function onCopyClicked(){navigator.clipboard.writeText(editorOutput.getValue())}function getFilenameFromUrl(e){const t=new URL(e).pathname,n=t.lastIndexOf("/");return t.substring(n+1)}function onLoadFromUrlClicked(){let e=document.getElementById("url-input").value;null!=e&&""!=e&&(fetch(e).then((e=>e.text())).then((e=>editorInput.setValue(e))).catch((e=>alert("Couldn't send request!"))),filename=`${getFilenameFromUrl(e).split(".").slice(0,-1).join(".")}`)}function onLoadFromFileClicked(){var e=new FileReader;e.readAsText(loadFile.files[0],"UTF-8"),e.onload=function(e){editorInput.setValue(e.target.result)},e.onerror=function(e){alert("Couldn't read the file")},filename=`${loadFile.files[0].name.split(".").slice(0,-1).join(".")}`}function onBeautifyClicked(){const e=getBeautifyOptions(),t=beautify(editorInput.getValue(),e);editorOutput.setValue(t),filename+="-beautified.js"}const onMinifyClicked=async()=>{const e=await minify(editorInput.getValue());editorOutput.setValue(e),filename+="-minified.js"};function onObfuscateClicked(){const e=obfuscate(editorInput.getValue(),obLevel.value);editorOutput.setValue(e),filename+="-obfuscated.js"}async function detectAdBlock(){let e=!1;try{await fetch(new Request("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")).catch((t=>e=!0))}catch(t){e=!0}finally{1==e&&alert("Please Disbale AdBlock")}}